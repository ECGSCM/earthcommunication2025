# タスクリスト：施工事例サイトのNetlifyデプロイ

## タスク実行の進行状況

- [ ] Phase 1: 事前準備
- [ ] Phase 2: プロダクションビルド
- [ ] Phase 3: Netlifyデプロイ
- [ ] Phase 4: デプロイ後検証

---

## Phase 1: 事前準備

### Task 1.1: 作業ディレクトリへ移動
**優先度**: 高  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
cd /Users/cou/earthcommunication_施工事例/web_app
pwd
```

**期待される結果**:
```
/Users/cou/earthcommunication_施工事例/web_app
```

**成功基準**:
- カレントディレクトリが`web_app`になっている

---

### Task 1.2: 依存関係の確認
**優先度**: 中  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
npm list --depth=0
```

**期待される結果**:
- `react@19.2.0`
- `react-dom@19.2.0`
- `vite@5.4.11`
- `framer-motion@12.23.24`
- `lucide-react@0.555.0`
- エラーなし

**成功基準**:
- 必要なパッケージが全てインストールされている
- バージョンの不一致がない

**トラブルシューティング**:
- エラーが出た場合: `npm install`を実行

---

### Task 1.3: 既存ビルドのクリーンアップ
**優先度**: 高  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
rm -rf dist
ls -la | grep dist
```

**期待される結果**:
- `dist`ディレクトリが削除される
- `grep dist`で何も表示されない

**成功基準**:
- 古いビルド成果物が完全に削除されている

---

## Phase 2: プロダクションビルド

### Task 2.1: プロダクションビルド実行
**優先度**: 最高  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
npm run build
```

**期待される結果**:
```
vite v5.4.11 building for production...
✓ 2086 modules transformed.
✓ built in ~1.21s
```

**成功基準**:
- ビルドエラーがない
- `✓ built`メッセージが表示される
- `dist/`ディレクトリが作成される

**トラブルシューティング**:
- エラーが出た場合: エラーメッセージを確認し、該当ファイルを修正
- メモリ不足の場合: `NODE_OPTIONS=--max-old-space-size=4096 npm run build`

---

### Task 2.2: ビルド結果の確認
**優先度**: 高  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
ls -lh dist/
ls -lh dist/assets/
ls -lh dist/images/ | wc -l
```

**期待される結果**:
- `dist/index.html` - 約1KB
- `dist/assets/index-*.css` - 約7KB
- `dist/assets/index-*.js` - 約315KB
- `dist/images/` - 18ファイル + 1行（合計19行）

**成功基準**:
- 全ての必要なファイルが存在
- 画像ファイルが18枚全て存在

**トラブルシューティング**:
- 画像が不足している場合: `public/images/`を確認
- ファイルサイズが異常に小さい/大きい場合: ビルド設定を確認

---

### Task 2.3: ビルドサイズの確認
**優先度**: 中  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
du -sh dist/
du -sh dist/images/
```

**期待される結果**:
- `dist/`: 約44-45MB
- `dist/images/`: 約44MB

**成功基準**:
- 合計サイズが125MB以内（Netlify無料プラン制限）
- 画像ディレクトリが44MB前後

**メモ**:
- 現在のサイズは余裕で制限内
- 将来的に画像が増える場合は最適化を検討

---

## Phase 3: Netlifyデプロイ

### Task 3.1: Netlify CLIの確認
**優先度**: 高  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
which netlify
netlify --version
```

**期待される結果**:
- `/usr/local/bin/netlify`
- バージョン番号が表示される

**成功基準**:
- Netlify CLIがインストールされている
- コマンドが実行可能

**トラブルシューティング**:
- コマンドが見つからない場合: `npm install -g netlify-cli`

---

### Task 3.2: Netlifyログイン（初回のみ）
**優先度**: 高  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
netlify login
```

**期待される結果**:
- ブラウザが開く
- Netlifyログインページが表示される
- 認証成功のメッセージ

**成功基準**:
- Netlifyアカウントで認証が完了
- CLIがアカウントと紐付けされる

**トラブルシューティング**:
- アカウントがない場合: https://app.netlify.com/signup で作成
- ブラウザが開かない場合: 表示されたURLを手動でコピーしてブラウザで開く

---

### Task 3.3: デプロイ実行（本番環境）
**優先度**: 最高  
**所要時間**: 5-10分（アップロード時間含む）  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
netlify deploy --prod --dir=dist
```

**実行時の対話**:
1. "Create & configure a new site" を選択
2. Team: デフォルトのまま Enter
3. Site name: 空白のまま Enter（自動生成）または任意の名前を入力

**期待される結果**:
```
Deploying to main site URL...
✔ Finished hashing 19 files
✔ CDN requesting 19 files
✔ Finished uploading 19 assets
✔ Deploy is live!

Logs:              https://app.netlify.com/sites/[site-name]/deploys/[deploy-id]
Unique Deploy URL: https://[deploy-id]--[site-name].netlify.app
Website URL:       https://[site-name].netlify.app
```

**成功基準**:
- "Deploy is live!" メッセージが表示される
- Website URLが発行される
- エラーメッセージがない

**重要な情報を記録**:
- [ ] Website URL: ___________________________
- [ ] Site name: ___________________________
- [ ] Deploy ID: ___________________________

**トラブルシューティング**:
- アップロードが遅い場合: 正常（44MBのため数分かかる）
- タイムアウトエラー: ネットワーク接続を確認し、再実行
- 認証エラー: `netlify logout` → `netlify login`で再認証

---

### Task 3.4: デプロイURLの確認
**優先度**: 高  
**所要時間**: 1分  
**ステータス**: ⏸ 未着手

**実行コマンド**:
```bash
# Task 3.3で表示されたWebsite URLをメモ
echo "Website URL: https://[site-name].netlify.app"
```

**成功基準**:
- URLが正しく表示される
- URLをブラウザで開く準備ができている

---

## Phase 4: デプロイ後検証

### Task 4.1: サイトの基本表示確認
**優先度**: 最高  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**実行手順**:
1. Task 3.3で取得したWebsite URLをブラウザで開く
2. ページが正常に読み込まれるか確認

**検証項目**:
- [ ] ページが表示される（白紙やエラーページでない）
- [ ] タイトルが「2025年 施工事例 | Earth Communication」
- [ ] ヘッダーが表示される
- [ ] レイアウトが崩れていない

**成功基準**:
- HTTPステータス 200
- ページが完全に読み込まれる
- ブラウザコンソールに致命的エラーがない

**トラブルシューティング**:
- 404エラー: URLを再確認
- 白紙ページ: ブラウザコンソールでJSエラーを確認
- レイアウト崩れ: CSSファイルの読み込みを確認

---

### Task 4.2: 施工事例データの表示確認
**優先度**: 最高  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] 施工事例カードが表示される
- [ ] 合計18件の事例が表示される
- [ ] 各カードに以下が含まれる：
  - [ ] クライアント名
  - [ ] 説明文
  - [ ] カテゴリー
  - [ ] タグ

**確認方法**:
1. ページをスクロールして全ての事例を確認
2. カウントして18件あることを確認

**成功基準**:
- 全18件の事例が表示される
- データが正しく表示される
- 欠損や文字化けがない

**トラブルシューティング**:
- 件数が少ない: `src/data/cases.js`を確認
- データが表示されない: ブラウザコンソールでAPIエラーを確認

---

### Task 4.3: 画像の読み込み確認
**優先度**: 最高  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] 全18枚の画像が正常に読み込まれる
- [ ] 画像が404エラーでない
- [ ] 画像がぼやけていない/破損していない
- [ ] 画像のアスペクト比が正しい

**確認方法**:
1. 全ての施工事例カードの画像を目視確認
2. ブラウザのDevTools（Network タブ）で画像リクエストを確認
3. 404エラーがないことを確認

**成功基準**:
- 全画像が200ステータスで読み込まれる
- 画像が視覚的に正常

**トラブルシューティング**:
- 404エラー: パスを確認（`/images/`で始まっているか）
- 画像が表示されない: `dist/images/`に全ての画像があるか確認
- 遅延読み込みの確認: スクロールして画像が動的に読み込まれるか

---

### Task 4.4: カテゴリーフィルタ機能の確認
**優先度**: 高  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] カテゴリーフィルタボタンが表示される
- [ ] 各カテゴリーをクリックしてフィルタリングできる
- [ ] フィルタリング結果が正しい
- [ ] "All"ボタンで全件表示に戻る

**確認するカテゴリー**:
- [ ] All（全18件）
- [ ] School（3件）
- [ ] Kindergarten（6件）
- [ ] Church（2件）
- [ ] Museum（2件）
- [ ] Wedding（1件）
- [ ] Event（1件）

**成功基準**:
- フィルタリングが正常に動作
- 件数が正しい
- アニメーションがスムーズ

**トラブルシューティング**:
- フィルタが動作しない: JavaScriptエラーを確認
- 件数が合わない: `src/data/cases.js`のカテゴリー設定を確認

---

### Task 4.5: 画像モーダル機能の確認
**優先度**: 高  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] 画像をクリックするとモーダルが開く
- [ ] 拡大画像が正しく表示される
- [ ] モーダルの閉じるボタンが機能する
- [ ] モーダル外をクリックして閉じられる
- [ ] ESCキーで閉じられる

**確認方法**:
1. 任意の施工事例の画像をクリック
2. モーダルが開くことを確認
3. 各操作で閉じられることを確認

**成功基準**:
- モーダルが正常に開閉する
- 拡大画像が鮮明に表示される
- 操作性が良好

**トラブルシューティング**:
- モーダルが開かない: JavaScriptエラーを確認
- 画像がぼやける: 画像解像度を確認

---

### Task 4.6: レスポンシブデザインの確認
**優先度**: 高  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] デスクトップ表示（1920px幅）
- [ ] タブレット表示（768px幅）
- [ ] モバイル表示（375px幅）
- [ ] 各サイズでレイアウトが適切

**確認方法**:
1. ブラウザのDevToolsを開く（F12）
2. デバイスモードに切り替え（Ctrl+Shift+M）
3. 各デバイスサイズで表示を確認

**成功基準**:
- 全てのサイズで読みやすい
- レイアウト崩れがない
- テキストが読める大きさ
- タップ可能な要素が適切なサイズ

**トラブルシューティング**:
- レイアウト崩れ: CSSのメディアクエリを確認
- 横スクロールが出る: 要素の幅を確認

---

### Task 4.7: メタデータの確認
**優先度**: 中  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] ページタイトルが正しい
- [ ] meta descriptionが設定されている
- [ ] meta keywordsが設定されている
- [ ] OGP画像（将来的に）

**確認方法**:
1. ページのソースを表示（Ctrl+U）
2. `<head>`セクションを確認

**期待される内容**:
```html
<title>2025年 施工事例 | Earth Communication</title>
<meta name="description" content="学校・教育機関における音響・映像設備の導入実績をご紹介します。Earth Communicationの2025年施工事例集。" />
<meta name="keywords" content="施工事例,音響設備,映像設備,学校,教育機関,幼稚園,Earth Communication" />
```

**成功基準**:
- 全てのメタタグが正しく設定されている

---

### Task 4.8: セキュリティヘッダーの確認
**優先度**: 中  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] X-Frame-Options: DENY
- [ ] X-XSS-Protection: 1; mode=block
- [ ] X-Content-Type-Options: nosniff
- [ ] Referrer-Policy: strict-origin-when-cross-origin

**確認方法**:
1. ブラウザのDevToolsを開く
2. Networkタブでページリクエストを選択
3. Response Headersを確認

**成功基準**:
- `netlify.toml`で設定した全てのヘッダーが付与されている

**トラブルシューティング**:
- ヘッダーが設定されていない: `netlify.toml`の設定を確認

---

### Task 4.9: パフォーマンステスト
**優先度**: 低  
**所要時間**: 3分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] 初回ロード時間が3秒以内
- [ ] 画像の遅延読み込みが機能
- [ ] スクロールがスムーズ

**確認方法**:
1. ブラウザのNetworkタブでキャッシュをクリア
2. ページをリロード
3. Load timeを確認

**成功基準**:
- 初回ロード時間 < 3秒（目標）
- パフォーマンスが良好

**メモ**:
- 44MBの画像があるため、初回ロードは時間がかかる可能性あり
- CDNキャッシュが効き始めると高速化

---

### Task 4.10: ブラウザコンソールエラーの確認
**優先度**: 高  
**所要時間**: 2分  
**ステータス**: ⏸ 未着手

**検証項目**:
- [ ] JavaScriptエラーがない
- [ ] CSSエラーがない
- [ ] ネットワークエラーがない
- [ ] 警告が最小限

**確認方法**:
1. ブラウザのDevToolsを開く（F12）
2. Consoleタブを確認
3. エラーや警告をチェック

**成功基準**:
- 致命的エラーがゼロ
- 警告が許容範囲内

**トラブルシューティング**:
- エラーがある場合: エラーメッセージから原因を特定し修正

---

## 最終チェックリスト

### デプロイ成功の確認
- [ ] Task 3.3 が成功している
- [ ] Website URLが発行されている
- [ ] サイトにHTTPSでアクセスできる

### 機能の完全性
- [ ] 全18件の施工事例が表示される
- [ ] 全18枚の画像が読み込まれる
- [ ] カテゴリーフィルタが動作する
- [ ] 画像モーダルが動作する
- [ ] レスポンシブデザインが機能する

### 品質の確認
- [ ] メタデータが正しく設定されている
- [ ] セキュリティヘッダーが付与されている
- [ ] パフォーマンスが許容範囲
- [ ] ブラウザエラーがない

### ドキュメント更新
- [ ] Website URLを記録
- [ ] デプロイ日時を記録
- [ ] 問題があった場合は対処方法を記録

---

## デプロイ情報の記録

**デプロイ実施日**: _______________  
**Website URL**: _______________  
**Site Name**: _______________  
**Deploy ID**: _______________  
**ビルド時間**: _______________  
**デプロイ時間**: _______________  
**合計所要時間**: _______________

---

## トラブルシューティングガイド

### よくある問題と解決策

**問題: ビルドエラー**
- 解決策: エラーメッセージを確認し、該当ファイルを修正
- 参照: Task 2.1

**問題: デプロイがタイムアウト**
- 解決策: ネットワーク接続を確認、再度デプロイ
- 参照: Task 3.3

**問題: 画像が表示されない**
- 解決策: `dist/images/`に全画像があるか確認
- パスが`/images/`で始まっているか確認
- 参照: Task 4.3

**問題: フィルタが動作しない**
- 解決策: JavaScriptエラーを確認
- ブラウザコンソールをチェック
- 参照: Task 4.4

**問題: モバイル表示が崩れる**
- 解決策: CSSのメディアクエリを確認
- Viewportメタタグを確認
- 参照: Task 4.6

---

## 次のステップ（デプロイ後）

1. **URLの共有**: デプロイされたURLを関係者に共有
2. **ドメイン設定**: カスタムドメインの設定（オプション）
3. **Git連携**: GitHubリポジトリとの連携（推奨）
4. **継続的改善**:
   - 画像最適化（WebP形式への変換）
   - Google Analytics設定
   - SEO最適化
   - アクセシビリティ改善

---

**作成日時**: 2025-11-27  
**ステータス**: 完了  
**次のステップ**: 実行フェーズへ進む
